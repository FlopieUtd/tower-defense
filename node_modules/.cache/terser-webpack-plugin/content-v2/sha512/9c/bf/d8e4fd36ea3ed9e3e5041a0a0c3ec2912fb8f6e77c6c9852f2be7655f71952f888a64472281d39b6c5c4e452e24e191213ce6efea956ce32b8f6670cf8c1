{"code":"!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=0)}([function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=n(1),r=n(2),o=n(3),a=document.querySelector(\"canvas\"),l=a.getContext(\"2d\");a.width=50*i.map01[0].length,a.style.width=50*i.map01[0].length+\"px\",a.height=50*i.map01.length,a.style.height=50*i.map01.length+\"px\";var u=r.getUniquePosition(i.map01,2),f=r.getUniquePosition(i.map01,3),s=[],c=[],d=0,p=0,h=0,y=null;a.addEventListener(\"mousemove\",(function(e){var t=e.offsetX,n=e.offsetY,o={x:Math.floor(t/50),y:Math.floor(n/50)};y=0===r.getValueAtPosition(o,i.map01)?o:null})),a.addEventListener(\"mouseleave\",(function(){y=null})),a.addEventListener(\"click\",(function(){y&&(i.map01[y.y][y.x]=4,c.push({damagePerFrame:1,id:h++,isFiring:!1,position:y,radius:1.5}))}));var g=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},m=(g(),function(){var e=g();++d%30==0&&s.push({health:100,id:p++,isUnderFire:!1,originalHealth:100,position:r.getUniquePosition(i.map01,2),radius:.05,reward:5,route:r.breadthFirstSearch({map:i.map01,start:u,end:f})}),o.updateEnemies(s),c.forEach((function(e){e.isFiring=!1;var t=[];if(s.forEach((function(n){r.areColliding(e,n)&&t.push(n)})),t.sort((function(e,t){return e.id-t.id})),t.length){e.isFiring=!0;var n=e.damagePerFrame,i=t[0];i.isUnderFire=!0,i.health-=n}})),l.fillStyle=\"black\",l.fillRect(0,0,50*i.map01[0].length,50*i.map01.length),i.map01.forEach((function(e,t){e.forEach((function(e,n){e>0&&e<4&&(l.fillStyle=\"#444\",l.fillRect(50*n,50*t,50,50))}))})),c.forEach((function(e){var t=e.position,n=e.isFiring,i=t.x,r=t.y;l.fillStyle=\"blue\",l.fillRect(50*i+10,50*r+10,30,30),n&&(l.fillStyle=\"white\",l.beginPath(),l.arc(50*i+25,50*r+25,5,0,2*Math.PI),l.fill())})),s.forEach((function(e){var t=e.position,n=e.isUnderFire,i=e.health,r=e.originalHealth;l.fillStyle=n?\"white\":\"red\",l.beginPath(),l.arc(50*t.x+25,50*t.y+25,5,0,2*Math.PI),l.fill(),i<100&&(l.fillStyle=\"black\",l.fillRect(50*t.x+17.5,50*t.y+35,15,2),l.fillStyle=\"lime\",l.fillRect(50*t.x+17.5,50*t.y+35,i/r*15,2))})),y&&(l.fillStyle=\"rgba(255,255,255,.1)\",l.beginPath(),l.arc(50*y.x+25,50*y.y+25,75,0,2*Math.PI),l.fill(),l.fillStyle=\"rgba(0,0,255,0.4)\",l.fillRect(50*y.x+10,50*y.y+10,30,30)),e,requestAnimationFrame(m)});requestAnimationFrame(m)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.map01=[[0,0,0,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,1,0,0,0,0,0,0],[0,1,0,0,0,1,0,0,1,1,1,0],[0,1,0,0,0,1,0,0,1,0,1,0],[0,1,0,0,0,1,0,0,1,0,1,0],[0,1,0,0,0,1,1,1,1,0,1,0],[0,1,0,0,0,0,0,0,0,0,1,0],[0,2,0,0,0,0,0,0,0,0,3,0]]},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.getUniquePosition=function(e,t){var n,i;return e.forEach((function(e,r){e.includes(t)&&(i=r,n=e.indexOf(t))})),{x:n,y:i}},t.getValueAtPosition=function(e,t){var n=e.x,i=e.y;return t[i]?t[i][n]:null},t.arePositionsEqual=function(e,t){return Object.keys(e).length===Object.keys(t).length&&Object.keys(e).every((function(n){return e[n]===t[n]}))},t.getAdjacentPositions=function(e,n){return[{x:e.x-1,y:e.y},{x:e.x+1,y:e.y},{x:e.x,y:e.y-1},{x:e.x,y:e.y+1}].filter((function(e){return t.getValueAtPosition(e,n)>0&&t.getValueAtPosition(e,n)<4}))},t.positionToId=function(e){return e.x+1e3*e.y},t.breadthFirstSearch=function(e){var n=e.map,i=e.start,r=e.end,o=new Set,a=[];a.push({position:i,path:[]});for(var l=function(){var e=a.shift(),i=e.position,l=e.path;if(t.arePositionsEqual(i,r))return{value:l};o.has(t.positionToId(i))||(o.add(t.positionToId(i)),t.getAdjacentPositions(i,n).forEach((function(e){a.push({position:e,path:l.concat([e])})})))};a.length;){var u=l();if(\"object\"==typeof u)return u.value}return[]},t.areColliding=function(e,t){var n=e.position.x-t.position.x,i=e.position.y-t.position.y;return Math.sqrt(n*n+i*i)<e.radius+t.radius}},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=n(2);t.updateEnemies=function(e){e.forEach((function(t){var n=t.position,r=t.route;if(i.arePositionsEqual(n,end)||t.health<=0)return e.splice(e.indexOf(t),1),null;i.arePositionsEqual(n,r[0])&&r.shift(),t.position=move(n,r[0]),t.isUnderFire=!1}))}}]);","extractedComments":[]}